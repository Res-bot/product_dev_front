<div 
  *ngIf="isOpen" 
  class="modal-overlay"
  (click)="onClose()">
</div>

<div *ngIf="isOpen" class="modal-dialog" (click)="$event.stopPropagation()">
  <div class="modal-header">
    <h2 class="modal-title">
      {{ isEditMode ? 'Edit employee' : 'Add employee' }}
    </h2>
    <button 
      class="close-button"
      (click)="onClose()"
      aria-label="Close modal">
      âœ•
    </button>
  </div>

  <div class="modal-body">
    <form (ngSubmit)="onSubmit()">
      
      <div class="form-row">
        <div class="form-group">
          <label for="name" class="form-label">
            Name <span class="required">*</span>
          </label>
          <input
            id="name"
            type="text"
            class="form-input"
            [(ngModel)]="form.name"
            name="name"
            required />
        </div>

        <div class="form-group">
          <label for="email" class="form-label">
            Email <span class="required">*</span>
          </label>
          <input
            id="email"
            type="email"
            class="form-input"
            [(ngModel)]="form.email"
            name="email"
            required />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="studentId" class="form-label">
            Employee ID <span class="required">*</span>
          </label>
          <input
            id="studentId"
            type="text"
            class="form-input"
            [(ngModel)]="form.studentId"
            name="studentId"
            required />
        </div>

        <div class="form-group">
          <label for="role" class="form-label">
            Select Role <span class="required">*</span>
          </label>
          <select
            id="role"
            class="form-select"
            [(ngModel)]="form.role"
            name="role"
            required>
            <option value="" disabled>Select Role</option>
            <option *ngFor="let r of roles" [value]="r">{{ r }}</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="year" class="form-label">
            Select Year <span class="required">*</span>
          </label>
          <select
            id="year"
            class="form-select"
            [(ngModel)]="form.year"
            name="year"
            required>
            <option value="" disabled>Select Year</option>
            <option *ngFor="let y of years" [value]="y">{{ y }}</option>
          </select>
        </div>

        <div class="form-group">
          <label for="department" class="form-label">
            Select Department <span class="required">*</span>
          </label>
          <select
            id="department"
            class="form-select"
            [(ngModel)]="form.department"
            name="department"
            required>
            <option value="" disabled>Select Department</option>
            <option *ngFor="let dept of departments" [value]="dept">
              {{ dept }}
            </option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="phone" class="form-label">
            Phone <span class="required">*</span>
          </label>
          <input
            id="phone"
            type="tel"
            class="form-input"
            [(ngModel)]="form.phone"
            name="phone"
            required />
        </div>
      </div>

      <div class="form-group full-width" *ngIf="form.role === 'Teacher' || form.role === 'Admin'">
        <label for="address" class="form-label">
          Designation <span class="required">*</span>
        </label>
        <textarea
          id="address"
          class="form-textarea"
          [(ngModel)]="form.address"
          name="address"
          rows="1"
          required></textarea>
      </div>

      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-cancel"
          (click)="onClose()">
          Cancel
        </button>
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="!isFormValid()">
          {{ isEditMode ? 'Update employee' : 'Add employee' }}
        </button>
      </div>
    </form>
  </div>
</div>
