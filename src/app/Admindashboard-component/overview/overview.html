<div class="main-content">
  <!-- Loading Indicator -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <p>Loading dashboard data...</p>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid" *ngIf="!isLoading">
    <div class="stat-card">
      <div class="stat-info">
        <h3>Total Students</h3>
        <p class="stat-number">{{ stats.totalStudents }}</p>
        <p class="stat-change positive">Active students</p>
      </div>
      <div class="stat-icon blue">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/>
        </svg>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-info">
        <h3>Total Teachers</h3>
        <p class="stat-number">{{ stats.totalTeachers }}</p>
        <p class="stat-change positive">Active teachers</p>
      </div>
      <div class="stat-icon green">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
          <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
        </svg>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-info">
        <h3>Total Employees</h3>
        <p class="stat-number">{{ stats.totalEmployees }}</p>
        <p class="stat-change positive">Active employees</p>
      </div>
      <div class="stat-icon purple">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
          <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
        </svg>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-info">
        <h3>Total Courses</h3>
        <p class="stat-number">{{ stats.totalCourses }}</p>
        <p class="stat-change positive">Available courses</p>
      </div>
      <div class="stat-icon orange">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
          <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-5.04-6.71l-2.75 3.54-1.3-1.54c-.3-.36-.77-.36-1.07 0-.3.36-.3.96 0 1.32l1.98 2.36c.3.36.77.36 1.07 0L17.1 9.7c.3-.36.3-.96 0-1.32-.3-.36-.77-.36-1.07 0z"/>
        </svg>
      </div>
    </div>
  </div>

  <!-- Content Grid -->
  <div class="content-grid" *ngIf="!isLoading">
    <!-- Recent Activities -->
    <div class="card recent-activities">
      <h2>Recent Activities</h2>
      <div class="activities-list">
        <div class="activity-item" *ngFor="let activity of recentActivities">
          <div class="activity-icon" 
               [ngClass]="{
                 'blue-light': activity.type === 'STUDENT',
                 'green-light': activity.type === 'TEACHER',
                 'purple-light': activity.type === 'EMPLOYEE'
               }">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path d="M10 10c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 1c-1.66 0-5 .83-5 2.5V15h10v-1.5c0-1.67-3.34-2.5-5-2.5z"/>
            </svg>
          </div>
          <div class="activity-content">
            <p class="activity-title">{{ activity.description }}</p>
            <p class="activity-time">{{ activity.timestamp }}</p>
          </div>
        </div>

        <div *ngIf="recentActivities.length === 0" class="no-activities">
          <p>No recent activities</p>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="card quick-actions">
      <h2>Quick Actions</h2>
      <div class="actions-grid">
        <button class="action-btn primary" (click)="onAddStudent()">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="white">
            <path d="M10 2C5.58 2 2 5.58 2 10s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm3.5 9H10.5v3h-1v-3H6.5v-1h3V6h1v3h3.5v1z"/>
          </svg>
          Add User
        </button>
        <button class="action-btn primary" (click)="onAddcourse()">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="white">
            <path d="M10 2C5.58 2 2 5.58 2 10s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm3.5 9H10.5v3h-1v-3H6.5v-1h3V6h1v3h3.5v1z"/>
          </svg>
          Add Course
        </button>
        <button class="action-btn primary" (click)="onAdddepartment()">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="white">
            <path d="M10 2C5.58 2 2 5.58 2 10s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm3.5 9H10.5v3h-1v-3H6.5v-1h3V6h1v3h3.5v1z"/>
          </svg>
          Add Department
        </button>
      </div>
    </div>
  </div>

  <!-- Modals -->
  <app-add-student-modal
    [isOpen]="isAddStudentModalOpen"
    (close)="onCloseModal()"
    (submit)="onSubmitStudent($event)">
  </app-add-student-modal>

  <app-add-course-modal
    [isOpen]="isAddCourseModalOpen"
    (close)="onCloseModal()"
    (submit)="onSubmitCourse($event)">
  </app-add-course-modal>

  <app-add-department-modal
    [isOpen]="isAddDepartmentModalOpen"
    (close)="onCloseModal()"
    (submit)="onSubmitDepartment($event)">
  </app-add-department-modal>
</div>